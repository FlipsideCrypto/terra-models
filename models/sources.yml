version: 2

sources:
  - name: chainwalkers
    schema: prod
    database: chainwalkers
    freshness: # default freshness
      warn_after: { count: 12, period: hour }
      error_after: { count: 24, period: hour }
    loaded_at_field: _inserted_timestamp
    tables:
      - name: terra2_blocks
        description: "Blocks from the Terra chain. Note always use the latest inserted timestamp as duplicates can exist in this table!"
        columns:
          - name: record_id
            description: A unique id for the record generated by Chainwalkers
          - name: offset_id
            description: Synonmous with block_id for Terra
          - name: block_id
            description: The height of the chain this block corresponds with
          - name: block_timestamp
            description: The time the block was minted
          - name: network
            description: The blockchain network (i.e. mainnet, testnet, etc.)
          - name: chain_id
            description: Synonmous with blockchain name for Terra
          - name: tx_count
            description: The number of transactions in the block
          - name: header
            description: A json column containing the blocks header information
          - name: ingested_at
            description: The time this row was ingested by Chainwalkers
          - name: _inserted_timestamp
            description: The time this row was inserted into Snowflake
      - name: terra2_txs
        description: "Txs from the Terra chain. Note always use the latest inserted timestamp as duplicates can exist in this table!"
        columns:
          - name: record_id
            description: A unique id for the record generated by Chainwalkers
          - name: tx_id
            description: Synonmous with transaction hash, a unique on chain identifier for the transaction
          - name: tx_block_index
            description: The index of the transaction within the block. Starts at 0.
          - name: offset_id
            description: Synonmous with block_id for Terra
          - name: block_id
            description: The height of the chain this block corresponds with
          - name: block_timestamp
            description: The time the block was minted
          - name: network
            description: The blockchain network (i.e. mainnet, testnet, etc.)
          - name: chain_id
            description: Synonmous with blockchain name for Terra
          - name: tx_count
            description: The number of transactions in the block
          - name: header
            description: A json column containing the blocks header information
          - name: tx
            description: A json object containing the tx and any decoded logs
          - name: ingested_at
            description: The time this row was ingested by Chainwalkers
          - name: _inserted_timestamp
            description: The time this row was inserted into Snowflake
  - name: crosschain_silver
    schema: silver
    database: crosschain
    tables:
      - name: address_labels
      - name: number_sequence
  - name: bronze
    schema: bronze
    database: terra
    tables:
      - name: lq_blocks
      - name: lq_txs
      - name: classic_validator_voting_power
      - name: classic_terra_api
      - name: classic_terra_sink_645110886
      - name: classic_rest_proxy_1507016047
      - name: terra_balances
  - name: bronze_streamline
    database: streamline
    schema: |
      {{ "TERRA_DEV" if var("STREAMLINE_USE_DEV_FOR_EXTERNAL_TABLES", False) else "TERRA" }}
    tables:
      - name: blocks
      - name: transactions
  - name: shared
    database: crosschain
    schema: bronze
    tables:
      - name: legacy_prices
      - name: prod_address_label_sink_291098491
      - name: prod_address_tag_sync_1480319581
      - name: prod_nft_metadata_uploads_1828572827
      - name: prod_data_science_uploads_1748940988
  - name: crosschain_core
    database: crosschain
    schema: core
    tables:
      - name: dim_date_hours
  - name: github_actions
    database: terra
    schema: github_actions
    tables:
      - name: workflows